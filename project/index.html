<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
	<head>
		<title>Inside Effects</title>
		<link href="style.css" rel="stylesheet" type="text/css" />
		<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
		<script type="text/javascript" src="script.js"></script>
		<script type="text/javascript" src="../../../src/ohm/dist/ohm.js"></script>
		<script type="text/ohm-js">
			Inside {
			  Exp    = Seq 

			  Seq    = Seq ";"  Or              -- seq
			         | Or

			  Or     = Or  "||" And             -- or
			         | And

			  And    = And "&&" Eq              -- and
			         | Eq

			  Eq     = Eq  "==" Cmp             -- eq
			         | Eq  "!=" Cmp             -- ne
			         | Cmp

			  Cmp    = Cmp ">"  Add             -- gt
			         | Cmp "<"  Add             -- lt
			         | Cmp ">=" Add             -- ge
			         | Cmp "<=" Add             -- le
			         | Add

			  Add    = Add "+"  Mul             -- add
			         | Add "-"  Mul             -- sub
			         | Mul

			  Mul    = Mul "*"  Pow             -- mul
			         | Mul "/"  Pow             -- div
			         | Pow

			  Pow    = Pow "^"  Un              -- pow
			         | Un

			  Un     = "+" Un                   -- pos
			         | "-" Un                   -- neg  
			         | "!" Un                   -- not
			         | Call 

			  Call   = Stmt Pri+                -- args
			         | Stmt "(" ")"             -- call
			         | Stmt

			  Stmt   = "fun" ident* "->" Exp    -- fun
			         | "let" ident  "="  Exp    -- let
			         | Pri  

			  Pri    = "(" Exp ")"              -- paren
			         | ident
			         | number

			  ident  = letter alnum*

			  number = digit* "." digit+        -- fract
			         | digit+                   -- whole
			}
		</script>
	</head>
	<body>
		<h1>Syntax</h1>
		<script src="interp.js">
			let x = fun n -> n + 1
		</script>
		<!--
		<script src="interp.js">
			1 * 2 + 3 / 4
		</script>
		-->
		<!--
		<script src="interp.js">
			i = 0
			while { i < 10 } do { x, y | x + y }

			def while(cond, func):
				if ( cond )
					func()
				while(cond, func);
		</script>
		-->
	</body>
</html>
